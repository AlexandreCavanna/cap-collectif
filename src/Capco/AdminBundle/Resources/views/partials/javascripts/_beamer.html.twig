{% set isLoggedIn = is_granted('IS_AUTHENTICATED_REMEMBERED') %}
<script type="text/javascript">
  // Using var here cause not transpiled by Babel and to support
  // old browsers
  // The var name should be global and named "beamer_config"
  // https://www.getbeamer.com/blog/tutorial-how-to-use-beamer-in-your-website-or-app
  var beamer_config = {
    product_id: 'isibNKBX16208',
    language: '{{ intl_locale()|split('-')|first }}',
    user_firstname: '{{ isLoggedIn ? app.user.firstname : 'anon.'}}',
    user_lastname: '{{ isLoggedIn ? app.user.lastname : 'anon.'}}',
    user_email: '{{ isLoggedIn ? app.user.email : 'anon.'}}',
    user_id: '{{ isLoggedIn ? app.user.id|toGlobalId('User') : 'anon.'}}'
  };
</script>
{% if is_feature_enabled('helpscout_beacon') %}
  <script type="text/javascript" src="https://app.getbeamer.com/js/beamer-embed.js" defer="defer"></script>
{% endif %}
